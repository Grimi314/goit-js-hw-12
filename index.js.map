{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\"use ctrict\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\nconst buttonShowMore = document.querySelector(\".button-load-more\");\nexport async function createGallery(images) {\n  const markup = await images\n    .map((item) => {\n      const {\n        downloads,\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n      } = item;\n\n      return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            data-source=\"${largeImageURL}\"\n            alt=\"${tags}\"\n          />\n        </a>\n        <ul class=\"number-list\">\n          <li class=\"numder-item\">\n            <p class=\" \">Likes</p>\n            <p class=\"umber-text\">${likes}</p>\n          </li>\n          <li class=\"numder-item\">\n            <p class=\"umber-text\">Views</p>\n            <p class=\"umber-text\">${views}</p>\n          </li>\n          <li class=\"numder-item\">\n            <p class=\"umber-text\">Comments</p>\n            <p class=\"umber-text\">${comments}</p>\n          </li>\n          <li class=\"numder-item\">\n            <p class=\"umber-text\">Downloads</p>\n            <p class=\"umber-text\">${downloads}</p>\n          </li>\n        </ul>\n      </li>`;\n    })\n    .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n  buttonShowMore.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  buttonShowMore.classList.add(\"hidden\");\n}\n","\"use strict\";\nimport axios from \"axios\";\n\nexport const config = {\n  params: {\n    key: \"54150142-86526a32bbcea3c4d6b3084a1\",\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    per_page: 150,\n  },\n};\n\nexport async function getImagesByQuery(query, page) {\n  config.params.q = query;\n  config.params.page = page;\n\n  const getQueryData = await axios.get(\"https://pixabay.com/api/\", config);\n\n  return getQueryData.data;\n}\n","import iziToast from \"izitoast\";\n\nimport {\n  createGallery,\n  showLoader,\n  hideLoader,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from \"./js/render-functions\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\n\nconst buttonShowMore = document.querySelector(\".button-load-more\");\nconst userForm = document.querySelector(\".form\");\n\nlet query = \"\";\nlet page = 1;\nlet loadedImages = 0;\nlet totalImages = 0;\n\n/* ---------- SUBMIT ---------- */\nuserForm.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n\n  query = event.target.elements[\"search-text\"].value.trim();\n  if (!query) return;\n\n  page = 1;\n  loadedImages = 0;\n\n  clearGallery();\n  hideLoadMoreButton(); // ховаємо кнопку на старті нового пошуку\n  showLoader();\n\n  try {\n    const search = await getImagesByQuery(query, page);\n\n    if (search.hits.length === 0) {\n      iziToast.error({\n        title: \"Error\",\n        message:\n          \"Sorry, there are no images matching your search query. Please try again!\",\n      });\n      return;\n    }\n\n    createGallery(search.hits);\n\n    totalImages = search.totalHits;\n    loadedImages += search.hits.length;\n\n    if (loadedImages < totalImages) {\n      showLoadMoreButton();\n    } else {\n      iziToast.error({\n        title: \"Error\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Server error. Try again later.\",\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\n/* ---------- LOAD MORE ---------- */\nbuttonShowMore.addEventListener(\"click\", async () => {\n  page += 1;\n\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const search = await getImagesByQuery(query, page);\n\n    createGallery(search.hits);\n    loadedImages += search.hits.length;\n\n    smoothScroll();\n\n    if (loadedImages < totalImages) {\n      showLoadMoreButton();\n    } else {\n      iziToast.error({\n        title: \"Error\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Server error.\",\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\n/* ---------- SCROLL ---------- */\nfunction smoothScroll() {\n  requestAnimationFrame(() => {\n    const galleryItems = document.querySelectorAll(\".gallery-item\");\n    const lastItem = galleryItems[galleryItems.length - 1];\n    if (!lastItem) return;\n\n    const { height } = lastItem.getBoundingClientRect();\n\n    window.scrollBy({\n      top: height * 2,\n      behavior: \"smooth\",\n    });\n  });\n}\n"],"names":["lightbox","SimpleLightbox","gallery","loader","buttonShowMore","createGallery","images","markup","item","downloads","webformatURL","largeImageURL","tags","likes","views","comments","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","config","getImagesByQuery","query","page","axios","userForm","loadedImages","totalImages","event","search","iziToast","smoothScroll","galleryItems","lastItem","height"],"mappings":"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"}